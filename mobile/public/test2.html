<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>Audio download test</title>
		<link rel="stylesheet" href="assets/css/style.css" type="text/css">
		<style>
			#source {
				color: white;
				font-family: monospace;
			}
		</style>
	</head>
	<body>

		<div class="wrapper">
			<audio id="audio" src="" controls></audio>
			<button id="fetch">fetch source</button>
			<h4 id="source">Source: </h4>
		</div>

		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script
			src="https://code.jquery.com/jquery-3.2.1.min.js"
			integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
			crossorigin="anonymous"></script>
		<script>
			$('#fetch').on('click', function () {
				axios.get('https://localhost/tellum/api.php/sounds/15')
				.then(response => {
					console.log(response);
					$('#source').text('Source: ' + JSON.stringify(response.data));

					var blob = new Blob([response.data.sound], {'type' : 'audio/ogg; codecs=opus'});
					var audio = document.getElementById('audio');
					var audioURL = window.URL.createObjectURL(blob);
					audio.src = audioURL;
				})
			})

		</script>

	</body>
</html>
