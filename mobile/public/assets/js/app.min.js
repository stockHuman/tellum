(function(){'use strict';function a(a,b,c){var d=Math.sin,f=Math.cos,g=Math.PI;this.angle=2*Math.random()*g,this.radius=Math.random(),this.opacity=(5*Math.random()+2)/10,this.distance=1/this.opacity*c,this.speed=3e-5*this.distance,this.position={x:a+this.distance*f(this.angle),y:b+this.distance*d(this.angle)},this.draw=function(){e.fillStyle='rgba(255,255,255,'+this.opacity+')',e.beginPath(),e.arc(this.position.x,this.position.y,this.radius,0,2*g,!1),e.fill(),e.closePath()},this.update=function(){this.angle+=this.speed,this.position={x:a+this.distance*f(this.angle),y:b+this.distance*d(this.angle)},this.draw()}}function b(b,c){this.position={x:b,y:c},this.radius=60,this.count=100,this.particles=[];for(var d=0;d<this.count;d++)this.particles.push(new a(this.position.x,this.position.y,this.radius))}function c(){e.clearRect(0,0,d.width,d.height),f.update(),requestAnimFrame(c)}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)};var d=document.getElementById('particles'),e=d.getContext('2d');d.width=window.innerWidth,d.height=window.innerHeight,b.prototype={update:function(){for(var a=0;a<this.count;a++)this.particles[a].update()}};var f=new b(d.width/2,d.height/2);c()})(),function(){'use strict';function a(){if(navigator.geolocation){const a=document.getElementById('meta');let c;navigator.geolocation.getCurrentPosition((d)=>{c=d,f=d,a.innerHTML=c.coords.latitude+' | '+c.coords.longitude,b()},(a)=>{console.log(a)})}else console.log('Geolocation is not supported for this Browser/OS.')}function b(){var a=[];navigator.mediaDevices.getUserMedia({audio:!0}).then(function(b){var f=new MediaRecorder(b);c(b),g.onclick=function(){e?(f.stop(),g.innerHTML='Record Audio'):(f.start(),g.innerHTML='Recording'),console.log(f.state),g.classList.toggle('rec'),e=!e},f.onstop=function(){console.log('data available after MediaRecorder.stop() called.');var b=prompt('Enter a name for your sound clip?','My unnamed clip');console.log(b);var c=document.createElement('article'),e=document.createElement('p'),f=document.createElement('audio'),g=document.createElement('button');c.classList.add('clip'),f.setAttribute('controls',''),g.textContent='Delete',g.className='delete',e.textContent=null===b?'My unnamed clip':b,c.appendChild(f),c.appendChild(e),c.appendChild(g),h.appendChild(c),f.controls=!0;var i=new Blob(a,{type:'audio/ogg; codecs=opus'});a=[];var j=window.URL.createObjectURL(i);f.src=j,console.log('recorder stopped'),console.info(i.size+' bytes, or '+i.size/1e6+'mb');let k=new FormData;k.append('meta','test'),k.append('datetime',new Date().toISOString().slice(0,19).replace('T',' ')),k.append('sound',i,'test.wav'),axios.post(d,k,{headers:{"content-type":'multipart/form-data'}}).then((a)=>{console.log(a)}).catch((a)=>{console.warn(a)}),g.onclick=function(a){evtTgt=a.target,evtTgt.parentNode.parentNode.removeChild(evtTgt.parentNode)},e.onclick=function(){var a=e.textContent,b=prompt('Enter a new name for your sound clip?');e.textContent=null===b?a:b}},f.ondataavailable=function(b){a.push(b.data)}},function(a){console.log('The following error occured: '+a)})}function c(a){function b(){const a=j.width,c=j.height;requestAnimationFrame(b),d.getByteTimeDomainData(f),l.fillStyle='#011936',l.fillRect(0,0,a,c),l.lineWidth=2,l.strokeStyle='#F4FFFD',l.beginPath();for(var g=0,h=0;h<e;h++){var i=f[h]/128,k=i*c/2;0===h?l.moveTo(g,k):l.lineTo(g,k),g+=1*a/e}l.lineTo(j.width,j.height/2),l.stroke()}var c=k.createMediaStreamSource(a),d=k.createAnalyser();d.fftSize=2048;var e=d.frequencyBinCount,f=new Uint8Array(e);c.connect(d),b()}const d='https://localhost/tellum/api.php/sounds/';let e=!1,f='';const g=document.getElementById('record'),h=document.querySelector('.sound-clips'),j=document.getElementById('visualizer'),i=document.querySelector('.main'),k=new(window.AudioContext||webkitAudioContext),l=j.getContext('2d');$(document).ready(function(){a()}),window.onresize=function(){j.width=i.offsetWidth},window.onresize()}();